<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blog - Santhosh's Portfolio</title>
    <link rel="stylesheet" href="styles.css" />
    <style>
      /* Style for individual blog cards - attempt with multiple selectors */
      .blog-card,
      .post-card,
      .article-card,
      #blog-content > div,
      #blog-content > article,
      .enhanced-blog-content > div,
      .enhanced-blog-content > article {
        width: 70% !important;
        margin: 0 auto 2rem auto !important;
      }
    </style>

    <!-- Syntax highlighting -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism.min.css" />

    <!-- Theme initialization and toggle functionality -->
    <script>
      // Initialize theme
      const savedTheme = localStorage.getItem("theme");
      const prefersDark = window.matchMedia(
        "(prefers-color-scheme: dark)"
      ).matches;
      const theme = savedTheme || (prefersDark ? "dark" : "light");
      document.documentElement.setAttribute("data-theme", theme);

      // Add theme toggle functionality when DOM is loaded
      document.addEventListener("DOMContentLoaded", () => {
        const themeToggle = document.querySelector(".theme-toggle");

        // Set initial icon state
        updateThemeIcon(theme);

        themeToggle.addEventListener("click", () => {
          const currentTheme =
            document.documentElement.getAttribute("data-theme");
          const newTheme = currentTheme === "dark" ? "light" : "dark";

          document.documentElement.setAttribute("data-theme", newTheme);
          localStorage.setItem("theme", newTheme);
          updateThemeIcon(newTheme);
        });
      });

      // Function to update theme icon visibility
      function updateThemeIcon(theme) {
        const sunIcon = document.querySelector(".sun-icon");
        const moonIcon = document.querySelector(".moon-icon");

        if (theme === "dark") {
          sunIcon.style.display = "block";
          moonIcon.style.display = "none";
        } else {
          sunIcon.style.display = "none";
          moonIcon.style.display = "block";
        }
      }
    </script>
  </head>
  <body>
    <nav class="nav">
      <div class="nav-container">
        <a href="index.html" class="logo">Santhosh reddy Barla</a>
        <button class="hamburger" aria-label="Toggle menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <ul class="nav-menu">
          <li><a href="index.html#home">Home</a></li>
          <li><a href="index.html#projects">Projects</a></li>
          <li><a href="blog.html">Blog</a></li>
          <li><a href="index.html#aboutme">About Me</a></li>
          <li><a href="docs/santhosh_resume.pdf">Download Resume</a></li>
        </ul>
      </div>
    </nav>

    <!-- Theme toggle button -->
    <button class="theme-toggle" aria-label="Toggle theme">
      <svg
        class="sun-icon"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
      </svg>
      <svg
        class="moon-icon"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
      </svg>
    </button>

    <main class="blog-container">
      <div
        id="blog-content"
        class="enhanced-blog-content"
        style="width: 70%; margin: 0 auto">
        <!-- Blog content will be dynamically inserted here -->
        <p>Loading blog content...</p>
      </div>
    </main>

    <footer>
      <!-- ... existing footer code ... -->
    </footer>

    <!-- Load Firebase first -->
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-app.js";
      import {
        getFirestore,
        collection,
        query,
        orderBy,
        limit,
        getDocs,
        doc,
        getDoc,
      } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-firestore.js";

      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyC3n6NwkGT5EjyKacMo5KbiIFIwggsFIQ0",
        authDomain: "dummy-api-f4510.firebaseapp.com",
        databaseURL: "https://dummy-api-f4510-default-rtdb.firebaseio.com",
        projectId: "dummy-api-f4510",
        storageBucket: "dummy-api-f4510.appspot.com",
        messagingSenderId: "423620853909",
        appId: "1:423620853909:web:fc795bc322b7096d9e5b9c",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // Make Firebase db available globally
      window.firebaseDb = db;
      window.firebaseModules = {
        collection,
        query,
        orderBy,
        limit,
        getDocs,
        doc,
        getDoc,
      };

      console.log(
        "Firebase initialized in blog.html",
        window.firebaseDb ? "DB available" : "DB not available"
      );
    </script>

    <!-- Load other scripts after Firebase is initialized -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
    <script src="js/blog.js"></script>
  </body>
</html>
